<% content_for :title, "Armaan Tornow" %>

<div class="content">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
  <% end %>

  <% if @featured_thoughts.any? %>
    <section class="featured-posts">
      <h2 style="font-size: 2rem; margin-bottom: 1.5rem;">Featured Posts</h2>
      <p style="color: #666; font-size: 0.9rem; margin-top: -1rem; margin-bottom: 1.5rem;">Highlighted thoughts and essays.</p>
      
      <% @featured_thoughts.each do |thought| %>
        <article class="featured-post">
          <div class="featured-post-thumbnail">
            <!-- Placeholder for future image functionality -->
          </div>
          <div class="featured-post-content">
            <h3><%= link_to thought.title, thought %></h3>
            <p class="featured-post-excerpt">
              <%= truncate(thought.body, length: 150) %>
            </p>
          </div>
        </article>
      <% end %>
    </section>
  <% end %>

  <% @thoughts.each do |thought| %>
    <article class="post-body">
      <h2 class="post-title">
        <%= link_to thought.title, thought %>
      </h2>
      <div class="post-meta">
        <span class="post-date"><%= thought.created_at.strftime("%d %b %Y") %></span>
        <% if user_signed_in? %>
          <span class="post-categories">
            • <%= link_to "Edit", edit_thought_path(thought), class: "admin-link" %>
            • <%= link_to "Delete", thought, method: :delete, 
                  data: { turbo_confirm: "Are you sure?" }, 
                  class: "admin-link delete-link" %>
          </span>
        <% end %>
      </div>

      <p><%= truncate(thought.body, length: 300) %></p>

      <%= link_to "More …", thought %>
    </article>
  <% end %>

  <% if @thoughts.empty? %>
    <p class="text-center my-10">No thoughts found.</p>
  <% end %>

  <% if user_signed_in? %>
    <div class="admin-actions" style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #eee;">
      <%= link_to "New Thought", new_thought_path, class: "btn btn-primary" %>
    </div>
  <% end %>
</div>
